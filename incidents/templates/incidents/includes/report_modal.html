<!-- Report Modal -->
<div class="modal-overlay" id="reportModal" style="display: none;">
  <div class="modal-content">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-bold text-white">Report Incident</h2>
      <button 
        onclick="closeReportModal()"
        class="hover:text-white text-gray-400 h-4 w-4"
      >
        <i class="fa-solid fa-xmark text-xs"></i>
      </button>
    </div>

    <form id="reportForm" onsubmit="submitReport(event)" class="space-y-4">
      {% csrf_token %}
      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1">
          Date/Time
        </label>
        <input
          type="datetime-local"
          id="incident-datetime"
          required
          class="w-full bg-gray-800/80 text-white rounded-lg px-4 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"
        />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1">
          Address
        </label>
        <input
          type="text"
          id="incident-address"
          placeholder="Enter the address of the incident"
          class="w-full bg-gray-800/80 text-white rounded-lg px-4 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"
        />
        <div id="address-suggestions" class="suggestions mt-2"></div>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1">
          Country
        </label>
        <select 
          id="incident-country" 
          required
          class="w-full bg-gray-800/80 text-white rounded-lg px-4 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"
        >
          <option value="">Select Country</option>
          <option value="AF">Afghanistan</option>
          <option value="AM">Armenia</option>
          <option value="AZ">Azerbaijan</option>
          <option value="BH">Bahrain</option>
          <option value="BY">Belarus</option>
          <option value="CD">DR Congo</option>
          <option value="ET">Ethiopia</option>
          <option value="GE">Georgia</option>
          <option value="IQ">Iraq</option>
          <option value="IL">Israel</option>
          <option value="JO">Jordan</option>
          <option value="KZ">Kazakhstan</option>
          <option value="KW">Kuwait</option>
          <option value="LB">Lebanon</option>
          <option value="LY">Libya</option>
          <option value="ML">Mali</option>
          <option value="MM">Myanmar</option>
          <option value="NG">Nigeria</option>
          <option value="PK">Pakistan</option>
          <option value="PS">Palestine</option>
          <option value="QA">Qatar</option>
          <option value="RU">Russia</option>
          <option value="SA">Saudi Arabia</option>
          <option value="SO">Somalia</option>
          <option value="SD">Sudan</option>
          <option value="SS">South Sudan</option>
          <option value="SY">Syria</option>
          <option value="TJ">Tajikistan</option>
          <option value="TR">Turkey</option>
          <option value="UA">Ukraine</option>
          <option value="AE">United Arab Emirates</option>
          <option value="YE">Yemen</option>
          <option value="OTHER">Other</option>
        </select>
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-400 mb-1">
            Latitude (Optional)
          </label>
          <input
            type="text"
            id="incident-lat"
            placeholder="Click map or enter manually"
            class="w-full bg-gray-800/80 text-white rounded-lg px-4 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"
          />
        </div>
        <div>
          <label class="block text-sm font-medium text-gray-400 mb-1">
            Longitude (Optional)
          </label>
          <input
            type="text"
            id="incident-lng"
            placeholder="Click map or enter manually"
            class="w-full bg-gray-800/80 text-white rounded-lg px-4 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"
          />
        </div>
      </div>
      <p class="text-sm text-gray-400 mt-1">You can click on the map to set coordinates, or leave them blank if location is unknown.</p>

      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1">
          Source Link (Optional)
        </label>
        <input
          type="text"
          id="incident-source"
          placeholder="Link to a social media post, article, etc."
          class="w-full bg-gray-800/80 text-white rounded-lg px-4 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"
        />
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1">
          Description
        </label>
        <textarea
          id="incident-description"
          rows="4"
          placeholder="Describe what happened..."
          required
          class="w-full bg-gray-800/80 text-white rounded-lg px-4 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"
        ></textarea>
      </div>

      <div>
        <label class="block text-sm font-medium text-gray-400 mb-1">
          Upload Image or Video
        </label>
        <input
          type="file"
          id="incident-image"
          accept="image/*"
          onchange="previewImage(event)"
          class="w-full bg-gray-800/80 text-white rounded-lg px-4 py-2 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-purple-500"
        />
        <img id="imagePreview" class="mt-4 rounded-lg max-h-48 hidden" alt="Preview" />
      </div>

      <button
        type="submit"
        class="w-full px-4 py-2 bg-purple-600/80 hover:bg-purple-600 text-white rounded-lg transition-colors flex items-center justify-center"
      >
        <i class="fa-solid fa-paper-plane mr-2"></i>
        Submit Report
      </button>
    </form>
  </div>
</div>
